!function(){var e,t,n,a,o,r={pageUpdatedEventName:"page:updated",elements:"img[data-src], img[data-srcset], source[data-srcset], iframe[data-src], video[data-src], [data-lazyload]",rootMargin:"0px",threshold:0,maxFrameCount:10,forceAutoplayVideoPlay:!0},d=[];function i(e){e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-lazyload")}function l(){this.removeEventListener("load",l),i(this)}function c(e){var t=e.getAttribute("data-srcset"),n=e.getAttribute("data-src"),a=null!==e.getAttribute("data-lazyload");if(t&&(e.setAttribute("srcset",t),window.picturefill&&window.picturefill({elements:[e]})),n&&(e.src=n),a&&(e.setAttribute("data-lazyloaded",""),e.removeEventListener("load",l),i(e)),e.autoplay&&e.paused)try{e.load(),e.paused&&r.forceAutoplayVideoPlay&&(e.outerHTML=e.outerHTML)}catch(o){}}function s(e){0===n&&a.disconnect();for(var t=0;t<e.length;t++){var o=e[t];o.intersectionRatio>0&&(n--,a.unobserve(o.target),o.target.addEventListener("load",l,!1),c(o.target))}}function u(){var m,v,f;if("really-old"===o){for(n=d.length,m=0;m<n;m++)d[m]&&(c(d[m]),i(d[m]));d=[]}else if("old"===o){if(t===r.maxFrameCount){for(n=d.length,m=0;m<n;m++)if(d[m]&&void 0===d[m].lazyloaded&&(v=d[m],f=void 0,(f=(v="SOURCE"===v.tagName?v.parentNode:v).getBoundingClientRect()).bottom>0&&f.right>0&&f.left<(window.innerWidth||document.documentElement.clientWidth)&&f.top<(window.innerHeight||document.documentElement.clientHeight))){var g=d[m];d[m]=void 0,g.lazyloaded=!0,g.addEventListener("load",l,!1),c(g)}for(m=0;m<n;m++)void 0===d[m]&&d.splice(m,1);n=d.length,t=-1}n>0&&(t++,e=window.requestAnimationFrame(u))}else if("new"===o)for(a=new IntersectionObserver(s,{rootMargin:r.rootMargin,threshold:r.threshold}),n=d.length,m=0;m<n;m++)d[m]&&void 0===d[m].lazyloaded&&a.observe(d[m])}function m(){if("old"===o)try{cancelAnimationFrame(e)}catch(i){}else if("new"===o)try{a.disconnect()}catch(i){}d=function(e){var t=[],n=0;for(t=[],n=e.length;n;)t[--n]=e[n];return t}(document.querySelectorAll(r.elements)),n=d.length,t=r.maxFrameCount,u()}var v=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);o="addEventListener"in window&&window.requestAnimationFrame&&void 0!==typeof document.body.getBoundingClientRect?"IntersectionObserver"in window?"new":"old":"really-old",m(),r.pageUpdatedEventName&&document.addEventListener(r.pageUpdatedEventName,m,!0)};"undefined"!=typeof exports?module.exports=v:window.lazyload=v}();